namespace Hazi2
{
    internal class Program
    {
        static int index = 0;
        static void Main(string[] args)
        {
            ReadInput();
        }

        private static void Evalinput(string[] lines)
        {
            index = 0;
            if (lines[index] == "begin" && lines[index + 1] == "end")
            {
                WriteOutput(1);
                return;
            }
            index = 1; // start after 'begin'

            int totalPaths = CalculatePaths(lines, "end");
            WriteOutput(totalPaths);
        }

        private static int CalculatePaths(string[] lines, string stopAt)
        {
            int paths = 1;
            while (lines[index] != stopAt)
            {
                if (lines[index] == "if")
                {
                    // consume 'if'
                    index++;

                    // parse if-branch until 'else'
                    int ifPaths = CalculatePaths(lines, "else");

                    // consume 'else'
                    index++;

                    // parse else-branch until 'endif'
                    int elsePaths = CalculatePaths(lines, "endif");

                    // consume 'endif'
                    index++;

                    paths *= (ifPaths + elsePaths);
                }
                else
                {
                    // advance past non-control tokens to avoid infinite loop
                    index++;
                }
            }
            // do not consume stopAt here; caller controls whether to consume it
            return paths;
        }

        private static void WriteOutput(int possibilities)
        {
            StreamWriter sw = new StreamWriter("output.txt");
            sw.Write(possibilities);
            sw.Close();
        }

        private static void ReadInput()
        {
            FileStream fs = new FileStream("input.txt", FileMode.Open);
            StreamReader sr = new StreamReader(fs);

            int firstLine = Convert.ToInt16(sr.ReadLine());
            string[] lines = new string[firstLine];

            for (int i = 0; i < firstLine; i++)
            {
                lines[i] = sr.ReadLine();
            }

            sr.Close();
            fs.Close();
            Evalinput(lines);
        }
    }
}
