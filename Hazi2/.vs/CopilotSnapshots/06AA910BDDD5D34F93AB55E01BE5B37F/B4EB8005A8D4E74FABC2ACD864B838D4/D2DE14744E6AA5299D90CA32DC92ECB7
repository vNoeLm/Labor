namespace Hazi2
{
    internal class Program
    {

        static void Main(string[] args)
        {
            ReadInput();
        }

        private static void Evalinput(string[] lines)
        {
            int index = 0;
            if (lines[index] == "begin" && lines[index + 1] == "end")
            {
                WriteOutput(1);
                return;
            }
            index = 1;

            var result = CalculatePaths(lines, index, "end");
            WriteOutput(result.Paths);
        }

        private static (int Paths, int NextIndex) CalculatePaths(string[] lines, int index, string stopAt)
        {
            int paths = 1;
            while (lines[index] != stopAt)
            {
                if (lines[index] == "if")
                {
                    index++;
                    var ifBranch = CalculatePaths(lines, index, "else");
                    index = ifBranch.NextIndex;

                    var elseBranch = CalculatePaths(lines, index, "endif");
                    index = elseBranch.NextIndex;

                    int nestedTotal = ifBranch.Paths + elseBranch.Paths;

                    paths *= nestedTotal;
                }
                else
                {
                    // If there are any non-control tokens, advance to avoid infinite loops
                    index++;
                }
            }
            // consume stopAt and return index pointing after it
            return (paths, index + 1);
        }

        private static void WriteOutput(int possibilities)
        {
            StreamWriter sw = new StreamWriter("output.txt");
            sw.Write(possibilities);
            sw.Close();
        }

        private static void ReadInput()
        {
            FileStream fs = new FileStream("input.txt", FileMode.Open);
            StreamReader sr = new StreamReader(fs);

            int firstLine = Convert.ToInt16(sr.ReadLine());
            string[] lines = new string[firstLine];

            for (int i = 0; i < firstLine; i++)
            {
                lines[i] = sr.ReadLine();
            }

            sr.Close();
            fs.Close();
            Evalinput(lines);
        }
    }
}
